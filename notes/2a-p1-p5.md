# Computer Networks Problems - Solutions P1-P5

## Table of Contents
- [P1. True or False Questions](#p1-true-or-false-questions)
- [P2. Smartphone Messaging Protocols](#p2-smartphone-messaging-protocols)
- [P3. Required Protocols for HTTP Client](#p3-required-protocols-for-http-client)
- [P4. HTTP GET Message Analysis](#p4-http-get-message-analysis)
- [P5. HTTP Response Message Analysis](#p5-http-response-message-analysis)

---

## P1. True or False Questions

### a. A user requests a Web page with text and three images. The client will send one request message and receive four response messages.

**Answer: FALSE**

**Explanation:** The client needs to send **4 separate HTTP GET requests** (one for the HTML page and one for each of the 3 images), and will receive **4 separate HTTP responses**. So it's 4 requests and 4 responses, not 1 request and 4 responses.

### b. Two distinct Web pages can be sent over the same persistent connection.

**Answer: TRUE**

**Explanation:** With persistent HTTP connections, multiple request/response pairs can be sent over the same TCP connection. The connection remains open after each response, allowing subsequent requests for different pages from the same server.

### c. With nonpersistent connections, a single TCP segment can carry two distinct HTTP request messages.

**Answer: FALSE**

**Explanation:** With non-persistent connections, each HTTP request/response requires a separate TCP connection. After the response is received, the connection is closed. Therefore, you cannot have two distinct HTTP requests in the same TCP connection, let alone the same TCP segment.

### d. The Date: header in the HTTP response indicates when the object was last modified.

**Answer: FALSE**

**Explanation:** The `Date:` header indicates when the **response was generated by the server**, not when the object was last modified. The `Last-Modified:` header indicates when the object was last modified.

### e. HTTP response messages never have an empty message body.

**Answer: FALSE**

**Explanation:** HTTP responses can have empty message bodies. For example, a `204 No Content` response or a `304 Not Modified` response typically has no message body.

---

## P2. Smartphone Messaging Protocols

### SMS (Short Message Service)
SMS uses the **SS7 (Signaling System 7)** protocol suite and operates at the signaling layer of cellular networks. Messages are transmitted through the **SMSC (Short Message Service Center)** using protocols like **MAP (Mobile Application Part)** for GSM networks or **IS-41** for CDMA networks. SMS is limited to 160 characters for text messages and operates independently of internet connectivity, relying solely on cellular network infrastructure. The protocol is connection-oriented and guarantees message delivery through store-and-forward mechanisms at the carrier level.

### iMessage
iMessage is Apple's proprietary messaging service that uses **Apple Push Notification service (APNs)** over internet protocols. It employs **end-to-end encryption** using public key cryptography and operates over **TCP/IP**. Messages are sent through Apple's servers using a combination of **HTTP/2** and **TLS 1.3** for secure transport. iMessage automatically falls back to SMS when internet connectivity is unavailable or when messaging non-Apple devices. The protocol supports rich media, read receipts, and typing indicators through Apple's proprietary binary protocol.

### WeChat
WeChat uses a **proprietary protocol** built on top of standard internet protocols including **TCP** and **HTTP/HTTPS**. The application employs **XMPP-inspired** architecture for real-time messaging with modifications for optimization. Communication occurs through Tencent's servers using **TLS encryption** for transport security. WeChat's protocol includes special optimizations for the Chinese network environment, including techniques to handle network instability and support for multiple media types. The system uses a hybrid push-pull mechanism for message delivery and synchronization across devices.

### WhatsApp
WhatsApp uses the **XMPP (Extensible Messaging and Presence Protocol)** as its foundation with significant customizations. It implements the **Signal Protocol** (formerly TextSecure) for **end-to-end encryption**, ensuring that only sender and recipient can read messages. Communication occurs over **TCP** with **TLS** encryption for transport security, and messages are routed through WhatsApp's servers (owned by Meta). The protocol uses **Protocol Buffers** for efficient binary serialization and supports features like group messaging, media sharing, and status updates through extended XMPP functionality.

### Key Differences
The primary differences lie in their **infrastructure dependencies and encryption models**. SMS operates entirely on cellular networks without internet, while iMessage, WeChat, and WhatsApp require internet connectivity. **End-to-end encryption** is native to iMessage and WhatsApp but not to SMS or WeChat (which only encrypts in transit). **Protocol openness** varies significantly: SMS uses standardized telecom protocols, WhatsApp builds on XMPP, while iMessage and WeChat use proprietary protocols. **Cross-platform compatibility** differs as SMS works on all phones, WhatsApp and WeChat are cross-platform for smartphones, but iMessage is restricted to Apple's ecosystem. Finally, SMS is carrier-dependent with per-message costs, while the others are data-dependent and typically free over WiFi/data plans.

---

## P3. Required Protocols for HTTP Client

**Answer:**

To retrieve a Web document when the IP address is initially unknown, the following protocols are needed:

1. **DNS (Domain Name System)** - Application Layer
    - To resolve the domain name in the URL to an IP address
    - Uses UDP port 53 (typically)

2. **UDP (User Datagram Protocol)** - Transport Layer
    - Used by DNS for query/response messages
    
3. **TCP (Transmission Control Protocol)** - Transport Layer
    - HTTP uses TCP for reliable data transfer
    - Establishes connection before HTTP communication

4. **IP (Internet Protocol)** - Network Layer
    - For routing packets between client and server
    - Not explicitly mentioned as "besides HTTP" but necessary

**Process Flow:**
1. DNS query (using UDP) to resolve domain name â†’ IP address
2. TCP connection establishment (3-way handshake) to the server
3. HTTP GET request sent over TCP connection
4. HTTP response received over TCP connection

---

## P4. HTTP GET Message Analysis

### Given HTTP GET Message:
```
GET /cs453/index.html HTTP/1.1<cr><lf>
Host: gaia.cs.umass.edu<cr><lf>
User-Agent: Mozilla/5.0 (Windows;U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)<cr><lf>
Accept: text/xml, application/xml, application/xhtml+xml, text/html;q=0.9, text/plain;q=0.8, image/png,*/*;q=0.5<cr><lf>
Accept-Language: en-us,en;q=0.5<cr><lf>
Accept-Encoding: zip,deflate<cr><lf>
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7<cr><lf>
Keep-Alive: 300<cr><lf>
Connection: keep-alive<cr><lf><cr><lf>
```

### a. What is the URL of the document requested by the browser?

**Answer:** `http://gaia.cs.umass.edu/cs453/index.html`

**Location:** 
- Path: First line - `/cs453/index.html`
- Host: Second line - `gaia.cs.umass.edu`

### b. What version of HTTP is the browser running?

**Answer:** HTTP/1.1

**Location:** First line - `GET /cs453/index.html HTTP/1.1`

### c. Does the browser request a non-persistent or persistent connection?

**Answer:** **Persistent connection**

**Location:** Last header line - `Connection: keep-alive`
- Also indicated by `Keep-Alive: 300` header

### d. What is the IP address of the host on which the browser is running?

**Answer:** **Cannot be determined from this HTTP GET message**

**Explanation:** The HTTP GET message does not contain the client's IP address. The IP address would be in the IP packet header that encapsulates this HTTP message, not in the HTTP message itself.

### e. What type of browser initiates this message? Why is the browser type needed?

**Answer:** **Netscape 7.2**

**Location:** User-Agent header - `Mozilla/5.0 (Windows;U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)`

**Why it's needed:**
- **Content negotiation:** Servers can send different content based on browser capabilities
- **Browser-specific features:** Some browsers support different HTML/CSS/JavaScript features
- **Statistics:** Website owners track browser usage
- **Bug workarounds:** Servers can implement workarounds for known browser bugs
- **Security:** Detect outdated browsers with known vulnerabilities

---

## P5. HTTP Response Message Analysis

### Given HTTP Response:
```
HTTP/1.1 200 OK<cr><lf>
Date: Tue, 07 Mar 2008 12:39:45 GMT<cr><lf>
Server: Apache/2.0.52 (Fedora)<cr><lf>
Last-Modified: Sat, 10 Dec 2005 18:27:46 GMT<cr><lf>
ETag: "526c3-f22-a88a4c80"<cr><lf>
Accept-Ranges: bytes<cr><lf>
Content-Length: 3874<cr><lf>
Keep-Alive: timeout=max=100<cr><lf>
Connection: Keep-Alive<cr><lf>
Content-Type: text/html; charset=ISO-8859-1<cr><lf><cr><lf>
<!doctype html public "-//w3c//dtd html 4.0 transitional//en"><lf>
<html><lf>
<head><lf>
...
```

### a. Was the server able to successfully find the document? What time was the reply provided?

**Answer:** 
- **Success:** YES - indicated by status code `200 OK`
- **Time:** Tuesday, 07 Mar 2008, 12:39:45 GMT

**Location:** 
- Status: First line - `HTTP/1.1 200 OK`
- Time: `Date: Tue, 07 Mar 2008 12:39:45 GMT`

### b. When was the document last modified?

**Answer:** Saturday, 10 Dec 2005, 18:27:46 GMT

**Location:** `Last-Modified: Sat, 10 Dec 2005, 18:27:46 GMT`

### c. How many bytes are there in the document being returned?

**Answer:** 3874 bytes

**Location:** `Content-Length: 3874`

### d. What are the first 5 bytes of the document being returned? Did the server agree to a persistent connection?

**Answer:** 
- **First 5 bytes:** `<!doc` (the beginning of `<!doctype...>`)
- **Persistent connection:** YES

**Location:**
- First bytes: Start of message body after the blank line
- Persistent connection: `Connection: Keep-Alive` header