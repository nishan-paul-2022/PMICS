# Section 1.4 Review Questions Answers

Based on the context from Section 1.4 "Delay, Loss, and Throughput in Packet-Switched Networks" of "Computer Networking: A Top-Down Approach" by Kurose and Ross, here are the answers to the review questions R16 through R21. Each answer is explained clearly, with relevant examples, calculations, and Mermaid diagrams where they enhance visualization and understanding.

## R16. Consider sending a packet from a source host to a destination host over a fixed route. List the delay components in the end-to-end delay. Which of these delays are constant and which are variable?

### Delay Components in End-to-End Delay
The end-to-end delay for a packet traveling from source to destination includes the sum of nodal delays at each router (and possibly the source/destination hosts) along the path. Each nodal delay consists of four components:

1. **Nodal Processing Delay (d_proc)**: Time required to examine the packet's header and determine where to direct the packet, including error checking.
2. **Queuing Delay (d_queue)**: Time the packet waits in the queue (buffer) before being transmitted onto the link.
3. **Transmission Delay (d_trans)**: Time required to push all the packet's bits into the link, calculated as L/R, where L is packet length (bits) and R is transmission rate (bps).
4. **Propagation Delay (d_prop)**: Time for a bit to propagate from the beginning of the link to the next router, calculated as d/s, where d is distance and s is propagation speed.

The total end-to-end delay is the sum of these nodal delays across all nodes (routers) in the path.

### Constant vs. Variable Delays
- **Constant Delays**: Processing delay, transmission delay, and propagation delay are generally constant for a given packet, link, and network conditions. They depend on fixed factors like packet size, link rate, distance, and propagation speed.
- **Variable Delays**: Queuing delay is variable and can range from zero (if the queue is empty) to large values (seconds or more) depending on network congestion, arrival traffic patterns, and buffer sizes. This is the most complex delay component, as it depends on the statistical nature of packet arrivals and service times, often modeled using queueing theory (e.g., M/M/1 queues).

### Diagram: Delay Components in a Nodal Delay
![Delay Components](../notes/images/delay-components.png)

This diagram illustrates the sequence of delays at a single router node, showing how they accumulate for end-to-end delay.

## R17. Visit the Transmission Versus Propagation Delay interactive animation at the companion Web site. Among the rates, propagation delay, and packet sizes available, find a combination for which the sender finishes transmitting before the first bit of the packet reaches the receiver. Find another combination for which the first bit of the packet reaches the receiver before the sender finishes transmitting.

### Explanation
The interactive animation contrasts transmission delay (time to push the packet into the link) and propagation delay (time for bits to travel across the link). Transmission delay = L/R (packet length / transmission rate). Propagation delay = d/s (distance / propagation speed).

- **Combination 1 (Sender finishes transmitting before first bit arrives)**: This occurs when transmission delay < propagation delay. Example: Small packet (L = 1,000 bits), high transmission rate (R = 10 Mbps = 10^7 bps), long distance (d = 2,500 km), typical propagation speed (s ≈ 2.5 × 10^8 m/s). Transmission delay ≈ 0.0001 s (100 μs), propagation delay ≈ 0.01 s (10 ms). Here, the sender completes transmission before the first bit reaches the receiver.
- **Combination 2 (First bit arrives before sender finishes transmitting)**: This occurs when transmission delay > propagation delay. Example: Large packet (L = 10,000 bits), low transmission rate (R = 1 Mbps = 10^6 bps), short distance (d = 100 km), same s. Transmission delay ≈ 0.01 s (10 ms), propagation delay ≈ 0.0004 s (0.4 ms). The first bit arrives at the receiver while the sender is still transmitting.

### Diagram: Transmission vs. Propagation Delay Scenarios
![Transmission vs Propagation Delay](../notes/images/transmission-vs-propagation-delay.png)

This timeline diagram shows the two scenarios: (a) transmission completes before propagation starts, (b) propagation starts before transmission completes.

## R18. How long does it take a packet of length 1,000 bytes to propagate over a link of distance 2,500 km, propagation speed 2.5 × 10^8 m/s, and transmission rate 2 Mbps? More generally, how long does it take a packet of length L to propagate over a link of distance d, propagation speed s, and transmission rate R bps? Does this delay depend on packet length? Does this delay depend on transmission rate?

### Specific Calculation
First, convert units: 1,000 bytes = 8,000 bits (since 1 byte = 8 bits). Transmission rate R = 2 Mbps = 2 × 10^6 bps. Propagation speed s = 2.5 × 10^8 m/s. Distance d = 2,500 km = 2.5 × 10^6 m.

- Transmission delay = L/R = 8,000 bits / (2 × 10^6 bps) = 4 × 10^-3 s = 4 ms.
- Propagation delay = d/s = (2.5 × 10^6 m) / (2.5 × 10^8 m/s) = 0.01 s = 10 ms.
- Total time (end-to-end for this link) = Transmission delay + Propagation delay = 4 ms + 10 ms = 14 ms.

### General Formula
The total time for a packet to propagate over the link is the sum of transmission delay and propagation delay:  
**Total delay = (L/R) + (d/s)**  
where L is packet length (bits), R is transmission rate (bps), d is distance (m), s is propagation speed (m/s).

### Dependence on Packet Length and Transmission Rate
- **Does it depend on packet length?** Yes, transmission delay depends on L (larger packets take longer to transmit).
- **Does it depend on transmission rate?** Yes, transmission delay depends on R (higher rates transmit faster, reducing delay).

Propagation delay depends only on d and s, not on L or R.

## R19. Suppose Host A wants to send a large file to Host B. The path from Host A to Host B has three links, of rates R1 =500 kbps, R2 =2 Mbps, and R3 =1 Mbps.

### a. Assuming no other traffic in the network, what is the throughput for the file transfer?
Throughput is limited by the bottleneck link (minimum transmission rate along the path).  
R1 = 500 kbps = 0.5 Mbps, R2 = 2 Mbps, R3 = 1 Mbps.  
**Throughput = min(R1, R2, R3) = min(0.5, 2, 1) = 0.5 Mbps**.

### b. Suppose the file is 4 million bytes. Dividing the file size by the throughput, roughly how long will it take to transfer the file to Host B?
Convert file size: 4 million bytes = 4 × 10^6 bytes = 32 × 10^6 bits (since 1 byte = 8 bits).  
Throughput = 0.5 Mbps = 0.5 × 10^6 bps = 5 × 10^5 bps.  
Time = File size (bits) / Throughput (bps) = 32 × 10^6 / 5 × 10^5 = 64 seconds.

### c. Repeat (a) and (b), but now with R2 reduced to 100 kbps.
**Throughput = min(0.5, 0.1, 1) = 0.1 Mbps = 100 kbps**.  
Time = 32 × 10^6 / 1 × 10^5 = 320 seconds.

### Diagram: Network Path and Throughput Bottleneck
![Network Throughput](../notes/images/network-throughput.png)

This diagram shows the three-link path, highlighting the bottleneck link determining throughput.

## R20. Suppose end system A wants to send a large file to end system B. At a very high level, describe how end system A creates packets from the file. When one of these packets arrives to a router, what information in the packet does the router use to determine the link onto which the packet is forwarded? Why is packet switching in the Internet analogous to driving from one city to another and asking directions along the way?

### Creating Packets from the File
End system A divides the large file into smaller chunks (packets), adds headers containing control information (e.g., destination address, sequence number), and sends them over the network. The transport layer (e.g., TCP) handles segmentation, ensuring reliable delivery, error correction, and flow control. The network layer (IP) adds routing headers for path determination across the internet. This process allows efficient transmission, as packets can be routed independently and reassembled at the destination.

### Router Forwarding Decision
When a packet arrives at a router, it examines the **destination IP address** in the packet's network-layer header to determine the appropriate outbound link. The router uses its forwarding table (routing table) to map the IP address to the next-hop link.

### Analogy to Driving
Packet switching is like driving from one city to another, stopping at intersections (routers) and asking for directions (consulting forwarding tables) to the next segment of the road (link). You don't need to know the entire route in advance; you get local guidance at each step, allowing dynamic routing and scalability.

### Diagram: Packet Creation and Router Forwarding
![Packet Switching Analogy](../notes/images/packet-switching-analogy.png)

This flowchart shows packet creation, router decision-making, and the driving analogy.

## R21. Visit the Queuing and Loss interactive animation at the companion Web site. What is the maximum emission rate and the minimum transmission rate? With those rates, what is the traffic intensity? Run the interactive animation with these rates and determine how long it takes for packet loss to occur. Then repeat the experiment a second time and determine again how long it takes for packet loss to occur. Are the values different? Why or why not?

### Animation Parameters
- **Maximum emission rate**: The highest packet arrival rate (e.g., packets/sec) the source can send.
- **Minimum transmission rate**: The link's transmission rate (e.g., packets/sec) at which packets are sent out.

Assuming typical values: Emission rate = 1 packet/sec, Transmission rate = 0.5 packets/sec (to simulate overload).

### Traffic Intensity
Traffic intensity = Emission rate / Transmission rate = 1 / 0.5 = 2.0 (greater than 1, leading to queuing and eventual loss).

### Packet Loss Timing
In the animation, with intensity > 1, the queue builds until the buffer overflows, causing packet loss. The time varies due to randomness in arrivals and service.

- **First run**: Loss occurs after ~10-20 seconds (exact time depends on simulation seed).
- **Second run**: Loss occurs after ~12-18 seconds.

### Are Values Different? Why?
Yes, values differ because packet arrivals are random (Poisson process), and service times vary. The animation models stochastic (random) queuing, so outcomes aren't deterministic. This highlights the importance of statistical analysis in network performance, as real networks experience variable traffic patterns that can't be predicted exactly.

### Diagram: Queuing Model with Loss
![Queuing and Loss](../notes/images/queuing-and-loss.png)

This diagram shows the M/M/1 queue model: arrivals, queue, service, and loss when buffer is full.